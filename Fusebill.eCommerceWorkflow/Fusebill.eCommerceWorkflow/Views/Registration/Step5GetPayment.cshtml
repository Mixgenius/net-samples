
@{
    ViewBag.Title = "Step5GetPayment";
}

<link href="~/Content/Plan.css" rel="stylesheet" />
<h1 style="margin-top: 200px; text-align:center">Step 5: Enter payment information</h1>


<head>
    <title>AJAX Transparent Redirect</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
            function AJAXTransparentRedirect(){
                $('#response').html("<p>into function</p>");
                var dataString =     'CustomerId='+ $('input#CustomerId').val() +
                                    '&PublicApiKey=' + $('input#PublicApiKey').val() +
                                    '&CardNumber='+$('input#CardNumber').val() +
                                    '&FirstName='+$('input#FirstName').val() +
                                    '&LastName='+$('input#LastName').val() +
                                    '&ExpirationMonth='+$('input#ExpirationMonth').val() +
                                    '&ExpirationYear='+$('input#ExpirationYear').val() +
                                    '&Cvv='+$('input#Cvv').val();
                $('#response').append("<br><p>Dat: "+$( "#allfields" ).serialize()+"</p>");
                //Set up the request
                var request = $.ajax({
                    type: "POST",

                    url: "https://payments.subscriptionplatform.com/api/payments/",
                    data: $( "#allfields" ).serialize()
                });

                //Set up the callback functions
                request.done(function(msg)
                {
                    $('#response').append("<br><p>success</p>");
                });

                request.fail(function(jqXHR)
                {
                    $('#response').append("<br><p>failure</p>");
                });
            }
    </script>
</head>
<body>
  
        <table class="paymentTable">

            <tbody>
                <tr>
                    <td>
                        <label for="CustomerId">Customer Id</label>
                        <input autofocus="autofocus" id="CustomerId" name="CustomerId" type="text" placeholder="Your customer id here" />
                    </td>
                    <td class="paymentBetweenColumnSpace"></td>
                    <td>
                        <label for="PublicApiKey">Public Api Key</label>
                        <input id="PublicApiKey" name="PublicApiKey" type="text" placeholder="Your key here" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="CardNumber">Card number</label>
                        <input id="CardNumber" name="CardNumber" type="text" placeholder="Your card number" />
                    </td>
                    <td class="paymentBetweenColumnSpace"></td>

                    <td>
                        <label for="FirstName">First name</label>
                        <input id="FirstName" name="FirstName" type="text" placeholder="First name" />
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="LastName">Last name</label>
                        <input id="LastName" name="LastName" type="text" placeholder="Last Name" />
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="ExpirationMonth">Expiry month</label>
                        <input id="ExpirationMonth" name="ExpirationMonth" type="text" placeholder="XX" />
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="ExpirationYear">Expiry year</label>
                        <input id="ExpirationYear" name="ExpirationYear" type="text" placeholder="XX" />
                    </td>
                </tr>

                <tr>
                    <td>
                        <label for="Cvv">CVV</label>
                        <input id="Cvv" name="Cvv" type="text" placeholder="XXX" />
                    </td>
                </tr>
            </tbody>
        </table>
  
    <input type="button" onclick="AJAXTransparentRedirect();" value="Submit Card">
    <div id="response"></div>
</body>
